<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Redirecting...</title><style>#lang-suggest{position:fixed;bottom:18px;right:18px;width:320px;max-width:calc(100% - 36px);background:linear-gradient(180deg,#fff,#fbfbff);border:1px solid rgba(30,30,30,.08);padding:14px;border-radius:12px;z-index:9999;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;box-shadow:0 8px 30px rgba(16,24,40,.08);color:#111827}#lang-suggest .title{font-size:15px;margin-bottom:6px}#lang-suggest .subtitle{font-size:13px;color:#4b5563;margin-bottom:10px}#lang-suggest .controls{display:flex;gap:8px;align-items:center}.btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-size:13px}.btn-primary{background:linear-gradient(180deg,#0066d6,#0053b8);color:#fff;box-shadow:0 2px 8px rgba(3,102,214,.12)}.btn-ghost{background:#f3f4f6;color:#111827}.btn-small{padding:6px 8px;font-size:12px}.progress{height:6px;width:100%;background:#eef2ff;border-radius:999px;overflow:hidden;margin-top:10px}.progress>i{display:block;height:100%;width:100%;background:linear-gradient(90deg,#7c3aed,#4f46e5);transform-origin:left;transition:transform .25s linear}.count{font-weight:600;margin-left:auto;font-size:13px;color:#0f172a}@media(max-width:420px){#lang-suggest{width:calc(100% - 36px);right:18px;left:18px}.count{display:none}}</style></head><body><script>const REDIRECT_DELAY_MS=8000;const SUPPORTED=['pt','en'];const LANG_NAME={pt:'Português',en:'English'};function norm(t){return(t||'').trim().toLowerCase()}function matchSimple(tag){if(!tag)return null;const p=norm(tag).split('-')[0];return SUPPORTED.includes(p)?p:null}function getBrowserPrefs(){const langs=[];if(Array.isArray(navigator.languages)&&navigator.languages.length)langs.push(...navigator.languages);if(navigator.language)langs.push(navigator.language);if(navigator.userLanguage)langs.push(navigator.userLanguage);return langs.map(l=>l).filter(Boolean)}let redirectTimeout=null,progressInterval=null,remainingMs=REDIRECT_DELAY_MS;function smartLangRedirect(){const prefs=getBrowserPrefs();for(const p of prefs){const m=matchSimple(p);if(m)return scheduleRedirect(m)}const suggested=matchSimple(prefs[0])||'pt';showBanner(suggested,false)}function scheduleRedirect(lang){const curSegment=location.pathname.replace(/^\/+|\/+$/g,'').split('/')[0];if(curSegment&&curSegment===lang)return;showBanner(lang,true);clearRedirectTimeout();remainingMs=REDIRECT_DELAY_MS;redirectTimeout=setTimeout(()=>doRedirect(lang),remainingMs);startProgress(lang)}function clearRedirectTimeout(){if(redirectTimeout){clearTimeout(redirectTimeout);redirectTimeout=null}if(progressInterval){clearInterval(progressInterval);progressInterval=null}}function doRedirect(lang){clearRedirectTimeout();const currentHref=location.origin+location.pathname;const targetHref=currentHref+'/'+lang+'/';if(currentHref&&currentHref===targetHref)return;location.href=targetHref}function showBanner(suggested,showCancel=false){if(document.getElementById('lang-suggest'))return;const b=document.createElement('div');b.id='lang-suggest';const languageLabel=LANG_NAME[suggested]||suggested;const messagePT=`Parece que você prefere ${languageLabel}`;const messageEN=`Looks like you prefer ${languageLabel}`;const message=suggested==='pt'?messagePT:messageEN;b.innerHTML=`<div class="title">${message}</div><div class="subtitle">Redirecionando para a versão <strong>${languageLabel}</strong> automaticamente.</div><div class="controls"><button id="goLang" class="btn btn-primary">${languageLabel}</button><button id="closeLang" class="btn btn-ghost btn-small">Manter esta página</button>${showCancel?'<button id="cancelAuto" class="btn btn-ghost btn-small">Cancelar</button>':''}<div class="count" id="count">8s</div></div><div class="progress" aria-hidden="true"><i id="progressBar" style="transform:scaleX(1)"></i></div>`;document.body.appendChild(b);document.getElementById('goLang').addEventListener('click',()=>{clearRedirectTimeout();doRedirect(suggested)});document.getElementById('closeLang').addEventListener('click',()=>{clearRedirectTimeout();b.remove()});if(showCancel){document.getElementById('cancelAuto').addEventListener('click',()=>{clearRedirectTimeout();const btn=document.getElementById('cancelAuto');if(btn)btn.textContent='Cancelado';setTimeout(()=>b.remove(),900)})}['keydown','click','touchstart'].forEach(evt=>{const handler=()=>{clearRedirectTimeout();['keydown','click','touchstart'].forEach(e=>document.removeEventListener(e,handler))};document.addEventListener(evt,handler,{once:true})})}function startProgress(lang){const progressBar=document.getElementById('progressBar');const countEl=document.getElementById('count');if(!progressBar||!countEl)return;const start=Date.now();const total=REDIRECT_DELAY_MS;progressInterval=setInterval(()=>{const elapsed=Date.now()-start;const remaining=Math.max(total-elapsed,0);const fraction=Math.max(0,1-(elapsed/total));progressBar.style.transform='scaleX('+fraction+')';const seconds=Math.ceil(remaining/1000);countEl.textContent=seconds+'s';if(remaining<=0){clearRedirectTimeout()}},250)}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',smartLangRedirect)}else{smartLangRedirect()}</script></body></html>
